0:00:00.550,0:00:02.492
Here's our coding solution for the share action

0:00:02.492,0:00:07.140
provider. Lets start by adding a string. The

0:00:07.140,0:00:12.590
string will be used for the label for our action. Now we're going to add a new

0:00:12.590,0:00:15.250
menu resource. This resource will be for the

0:00:15.250,0:00:18.360
detail fragment. We'll start by adding the name

0:00:18.360,0:00:20.780
space used by the Android support library for

0:00:20.780,0:00:24.390
it's widget XML. Finally, we add the actual item.

0:00:25.640,0:00:28.340
This menu item contains the string that we

0:00:28.340,0:00:31.200
just added from the strings file. It's always

0:00:31.200,0:00:33.130
shown as an action. So it appears on

0:00:33.130,0:00:37.499
the action bar. And it's actionProviderClass, is the ShareActionProvider

0:00:37.499,0:00:40.710
from the Android support library. The Android support

0:00:40.710,0:00:44.000
library allows the ShareActionProvider to be used on earlier

0:00:44.000,0:00:46.530
versions of Android then 4.0. When it was

0:00:46.530,0:00:50.550
officially added to the framework. Next, let's go to

0:00:50.550,0:00:53.704
the DetailAactivity. We're going to be looking at the

0:00:53.704,0:00:57.750
DetailFragment within the DetailActivity. So the first thing

0:00:57.750,0:01:01.860
we can do in our fragment is to add a few useful things. Let's add a log

0:01:01.860,0:01:05.590
tag, a string for the share hashtag, hashtag

0:01:05.590,0:01:08.840
sunshineApp, and we're going to take the forecast

0:01:08.840,0:01:12.430
string and make it a member variable. Next

0:01:12.430,0:01:17.070
in onCreate view, let's actually populate our member variable.

0:01:17.070,0:01:20.330
And then finally, use it to set the text.

0:01:20.330,0:01:24.610
Lets create a share intent. This intent uses ACTION_SEND.

0:01:24.610,0:01:28.120
This flag activity cleared when task reset is somewhat

0:01:28.120,0:01:31.470
important. It prevents the activity we're sharing to from

0:01:31.470,0:01:34.970
being place onto the activity stack. What will happen,

0:01:34.970,0:01:36.740
if we don't have this flag, is when you

0:01:36.740,0:01:39.230
click on the icon to return to the application

0:01:39.230,0:01:42.550
later, you may actually end up in another application.

0:01:42.550,0:01:45.060
The one that's actually handling the share intent. When

0:01:45.060,0:01:50.500
FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET is used, it'll actually return you to your

0:01:50.500,0:01:54.410
application instead. We've set the type, test/plain, to let

0:01:54.410,0:01:57.380
Android know we're going to be sharing plain text. And

0:01:57.380,0:02:00.460
then we share our forecast string plus our hashtag.

0:02:00.460,0:02:02.820
Only one more thing left to do. We have

0:02:02.820,0:02:05.450
to add the menu to the fragment. To do

0:02:05.450,0:02:07.690
this, we have to set a flag that this fragment

0:02:07.690,0:02:09.940
has an options menu at all. Otherwise, it

0:02:09.940,0:02:12.260
won't actually call the onCreate options menu member

0:02:12.260,0:02:16.350
function. Finally, here's our on creat options member

0:02:16.350,0:02:18.555
function. As you can see, we're inflating the

0:02:18.555,0:02:21.846
detailfragment menu that we created earlier. Finding the

0:02:21.846,0:02:25.644
share item, getting the ShareActionProvider, and attaching our

0:02:25.644,0:02:29.360
intent to this ShareActionProvider. You'll want to update

0:02:29.360,0:02:32.700
this whenever the data you want to share changes.

0:02:32.700,0:02:36.480
And that's it. You've now added a ShareActionProvider into Sunshine.
